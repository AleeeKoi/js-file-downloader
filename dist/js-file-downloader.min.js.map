{"version":3,"sources":["webpack://jsFileDownloader/webpack/universalModuleDefinition","webpack://jsFileDownloader/webpack/bootstrap","webpack://jsFileDownloader/./src/exception.js","webpack://jsFileDownloader/./src/signatures.js","webpack://jsFileDownloader/./src/index.js"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","DownloadException","_Error","_inherits","_super","message","request","_this","_classCallCheck","concat","_wrapNativeSuper","Error","fileSignatures","_typeof","obj","iterator","constructor","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","fn","arg","type","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","record","result","__await","then","unwrapped","error","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","done","methodName","undefined","return","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","keys","val","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","catch","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_asyncToGenerator","args","arguments","apply","instance","Constructor","_defineProperties","target","props","descriptor","input","hint","prim","toPrimitive","res","String","Number","_toPrimitive","DEFAULT_PARAMS","timeout","headers","forceDesktopMode","autoStart","withCredentials","nameCallback","contentType","body","nativeFallbackOnError","contentTypeDetermination","JsFileDownloader","customParams","params","assign","link","createLink","downloadedFile","abortController","downloadFile","protoProps","staticProps","_startDownload","_getFile","reason","abort","initDownload","abortListener","signal","addEventListener","removeEventListener","_this2","fallback","href","url","clickLink","isMobile","createRequest","window","AbortController","_ref","unsetAbortListner","setAbortListner","onload","_callee","_context","parseInt","status","startDownload","ontimeout","onerror","send","test","navigator","userAgent","XMLHttpRequest","open","setRequestHeader","header","responseType","process","onloadstart","includeCredentials","filename","content","getResponseHeader","contentParts","replace","match","extractedName","split","file","signatures","customFileSignatures","reader","FileReader","first4BytesOfFile","onloadend","evt","readyState","DONE","uint","Uint8Array","bytes","byte","toString","hex","join","toUpperCase","readAsArrayBuffer","response","_this3","_ref3","_callee2","defaultContentType","headerContentType","signatureContentType","_headerContentType","_signatureContentType","_ref4","_signatureContentType2","_context2","getContentTypeFromResponseHeader","getContentTypeFromFileSignature","Blob","_x","document","createElement","style","display","event","MouseEvent","e","createEvent","initMouseEvent","dispatchEvent","_callee3","fileName","options","_context3","getContentType","File","lastModifiedDate","Date","_x2","_x3","_callee4","objectUrl","_context4","getFileName","getFile","msSaveOrOpenBlob","URL","createObjectURL","download","setTimeout","webkitURL","revokeObjectURL"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIH,GACe,iBAAZC,QACdA,QAA0B,iBAAID,IAE9BD,EAAuB,iBAAIC,IAR7B,CASGK,MAAM,WACT,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUP,QAGnC,IAAIC,EAASI,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHT,QAAS,IAUV,OANAU,EAAQH,GAAUI,KAAKV,EAAOD,QAASC,EAAQA,EAAOD,QAASM,GAG/DL,EAAOQ,GAAI,EAGJR,EAAOD,QA0Df,OArDAM,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASd,EAASe,EAAMC,GAC3CV,EAAoBW,EAAEjB,EAASe,IAClCG,OAAOC,eAAenB,EAASe,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAAStB,GACX,oBAAXuB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAenB,EAASuB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAenB,EAAS,aAAc,CAAEyB,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAShC,GAChC,IAAIe,EAASf,GAAUA,EAAO2B,WAC7B,WAAwB,OAAO3B,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAK,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,G,8sEClF9C,IAAMC,EAAiB,SAAAC,I,qRAAAC,CAAAF,EAAAC,GAAA,I,UAAAE,G,EAAAH,E,mJAC5B,SAAAA,EAAaI,EAASC,GAAS,IAAAC,EAGG,O,4FAHHC,CAAA,KAAAP,IAC7BM,EAAAH,EAAAhC,KAAA,0BAAAqC,OAA2BJ,KACtBC,QAAUA,EACfC,EAAK/B,KAAO,oBAAoB+B,EACjC,O,EAAAN,E,mFAL2B,CAK3BS,EALoCC,QCA1BC,EAAiB,CAC5B,WAAY,YACZ,SAAY;;;;;;;;;ACOD,SAAAC,EAAAC,GAAA,OAAAD,EAAA,mBAAA7B,QAAA,iBAAAA,OAAA+B,SAAA,SAAAD,GAAA,cAAAA,GAAA,SAAAA,GAAA,OAAAA,GAAA,mBAAA9B,QAAA8B,EAAAE,cAAAhC,QAAA8B,IAAA9B,OAAAa,UAAA,gBAAAiB,OAAA,SAAAG,wJARbA,EAAA,kBAAAxD,GAAA,IAAAA,EAAA,GAAAyD,EAAAvC,OAAAkB,UAAAsB,EAAAD,EAAApB,eAAAlB,EAAAD,OAAAC,gBAAA,SAAAkC,EAAAtB,EAAA4B,GAAAN,EAAAtB,GAAA4B,EAAAlC,OAAAmC,EAAA,mBAAArC,cAAA,GAAAsC,EAAAD,EAAAN,UAAA,aAAAQ,EAAAF,EAAAG,eAAA,kBAAAC,EAAAJ,EAAApC,aAAA,yBAAAtB,EAAAmD,EAAAtB,EAAAN,GAAA,OAAAP,OAAAC,eAAAkC,EAAAtB,EAAA,CAAAN,QAAAL,YAAA,EAAA6C,cAAA,EAAAC,UAAA,IAAAb,EAAAtB,GAAA,IAAA7B,EAAA,aAAAiE,GAAAjE,EAAA,SAAAmD,EAAAtB,EAAAN,GAAA,OAAA4B,EAAAtB,GAAAN,GAAA,SAAA2C,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,KAAAlC,qBAAAsC,EAAAJ,EAAAI,EAAAC,EAAAzD,OAAAY,OAAA2C,EAAArC,WAAAwC,EAAA,IAAAC,EAAAL,GAAA,WAAArD,EAAAwD,EAAA,WAAAlD,MAAAqD,EAAAT,EAAAE,EAAAK,KAAAD,EAAA,SAAAI,EAAAC,EAAA3B,EAAA4B,GAAA,WAAAC,KAAA,SAAAD,IAAAD,EAAArE,KAAA0C,EAAA4B,IAAA,MAAAd,GAAA,OAAAe,KAAA,QAAAD,IAAAd,IAAAnE,EAAAoE,OAAA,IAAAe,EAAA,YAAAT,KAAA,SAAAU,KAAA,SAAAC,KAAA,IAAAC,EAAA,GAAApF,EAAAoF,EAAAzB,GAAA,8BAAA0B,EAAArE,OAAAsE,eAAAC,EAAAF,OAAAG,EAAA,MAAAD,OAAAhC,GAAAC,EAAA/C,KAAA8E,EAAA5B,KAAAyB,EAAAG,GAAA,IAAAE,EAAAN,EAAAjD,UAAAsC,EAAAtC,UAAAlB,OAAAY,OAAAwD,GAAA,SAAAM,EAAAxD,GAAA,0BAAAyD,SAAA,SAAAC,GAAA5F,EAAAkC,EAAA0D,GAAA,SAAAb,GAAA,YAAAc,QAAAD,EAAAb,SAAA,SAAAe,EAAArB,EAAAsB,GAAA,IAAAC,EAAA/E,EAAA,gBAAAM,MAAA,SAAAqE,EAAAb,GAAA,SAAAkB,IAAA,WAAAF,GAAA,SAAAG,EAAAC,IAAA,SAAAC,EAAAR,EAAAb,EAAAmB,EAAAC,GAAA,IAAAE,EAAAxB,EAAAJ,EAAAmB,GAAAnB,EAAAM,GAAA,aAAAsB,EAAArB,KAAA,KAAAsB,EAAAD,EAAAtB,IAAAxD,EAAA+E,EAAA/E,MAAA,OAAAA,GAAA,UAAA2B,EAAA3B,IAAAiC,EAAA/C,KAAAc,EAAA,WAAAwE,EAAAG,QAAA3E,EAAAgF,SAAAC,MAAA,SAAAjF,GAAA6E,EAAA,OAAA7E,EAAA2E,EAAAC,MAAA,SAAAlC,GAAAmC,EAAA,QAAAnC,EAAAiC,EAAAC,MAAAJ,EAAAG,QAAA3E,GAAAiF,MAAA,SAAAC,GAAAH,EAAA/E,MAAAkF,EAAAP,EAAAI,MAAA,SAAAI,GAAA,OAAAN,EAAA,QAAAM,EAAAR,EAAAC,QAAAE,EAAAtB,KAAAqB,CAAAR,EAAAb,EAAAmB,EAAAC,MAAA,OAAAH,MAAAQ,KAAAP,YAAA,SAAArB,EAAAT,EAAAE,EAAAK,GAAA,IAAAiC,EAAA,iCAAAf,EAAAb,GAAA,iBAAA4B,EAAA,UAAA3D,MAAA,iDAAA2D,EAAA,cAAAf,EAAA,MAAAb,EAAA,OAAA6B,IAAA,IAAAlC,EAAAkB,SAAAlB,EAAAK,QAAA,KAAA8B,EAAAnC,EAAAmC,SAAA,GAAAA,EAAA,KAAAC,EAAAC,EAAAF,EAAAnC,GAAA,GAAAoC,EAAA,IAAAA,IAAA7B,EAAA,gBAAA6B,GAAA,YAAApC,EAAAkB,OAAAlB,EAAAsC,KAAAtC,EAAAuC,MAAAvC,EAAAK,SAAA,aAAAL,EAAAkB,OAAA,uBAAAe,EAAA,MAAAA,EAAA,YAAAjC,EAAAK,IAAAL,EAAAwC,kBAAAxC,EAAAK,SAAA,WAAAL,EAAAkB,QAAAlB,EAAAyC,OAAA,SAAAzC,EAAAK,KAAA4B,EAAA,gBAAAN,EAAAxB,EAAAV,EAAAE,EAAAK,GAAA,cAAA2B,EAAArB,KAAA,IAAA2B,EAAAjC,EAAA0C,KAAA,6BAAAf,EAAAtB,MAAAE,EAAA,gBAAA1D,MAAA8E,EAAAtB,IAAAqC,KAAA1C,EAAA0C,MAAA,UAAAf,EAAArB,OAAA2B,EAAA,YAAAjC,EAAAkB,OAAA,QAAAlB,EAAAK,IAAAsB,EAAAtB,OAAA,SAAAgC,EAAAF,EAAAnC,GAAA,IAAA2C,EAAA3C,EAAAkB,SAAAiB,EAAAzD,SAAAiE,GAAA,QAAAC,IAAA1B,EAAA,OAAAlB,EAAAmC,SAAA,eAAAQ,GAAAR,EAAAzD,SAAAmE,SAAA7C,EAAAkB,OAAA,SAAAlB,EAAAK,SAAAuC,EAAAP,EAAAF,EAAAnC,GAAA,UAAAA,EAAAkB,SAAA,WAAAyB,IAAA3C,EAAAkB,OAAA,QAAAlB,EAAAK,IAAA,IAAAyC,UAAA,oCAAAH,EAAA,aAAApC,EAAA,IAAAoB,EAAAxB,EAAAe,EAAAiB,EAAAzD,SAAAsB,EAAAK,KAAA,aAAAsB,EAAArB,KAAA,OAAAN,EAAAkB,OAAA,QAAAlB,EAAAK,IAAAsB,EAAAtB,IAAAL,EAAAmC,SAAA,KAAA5B,EAAA,IAAAwC,EAAApB,EAAAtB,IAAA,OAAA0C,IAAAL,MAAA1C,EAAAmC,EAAAa,YAAAD,EAAAlG,MAAAmD,EAAAiD,KAAAd,EAAAe,QAAA,WAAAlD,EAAAkB,SAAAlB,EAAAkB,OAAA,OAAAlB,EAAAK,SAAAuC,GAAA5C,EAAAmC,SAAA,KAAA5B,GAAAwC,GAAA/C,EAAAkB,OAAA,QAAAlB,EAAAK,IAAA,IAAAyC,UAAA,oCAAA9C,EAAAmC,SAAA,KAAA5B,GAAA,SAAA4C,EAAAC,GAAA,IAAAC,EAAA,CAAAC,OAAAF,EAAA,SAAAA,IAAAC,EAAAE,SAAAH,EAAA,SAAAA,IAAAC,EAAAG,WAAAJ,EAAA,GAAAC,EAAAI,SAAAL,EAAA,SAAAM,WAAAC,KAAAN,GAAA,SAAAO,EAAAP,GAAA,IAAA1B,EAAA0B,EAAAQ,YAAA,GAAAlC,EAAArB,KAAA,gBAAAqB,EAAAtB,IAAAgD,EAAAQ,WAAAlC,EAAA,SAAA1B,EAAAL,GAAA,KAAA8D,WAAA,EAAAJ,OAAA,SAAA1D,EAAAqB,QAAAkC,EAAA,WAAAW,OAAA,YAAAhD,EAAAiD,GAAA,GAAAA,EAAA,KAAAC,EAAAD,EAAA9E,GAAA,GAAA+E,EAAA,OAAAA,EAAAjI,KAAAgI,GAAA,sBAAAA,EAAAd,KAAA,OAAAc,EAAA,IAAAE,MAAAF,EAAAG,QAAA,KAAAtI,GAAA,EAAAqH,EAAA,SAAAA,IAAA,OAAArH,EAAAmI,EAAAG,QAAA,GAAApF,EAAA/C,KAAAgI,EAAAnI,GAAA,OAAAqH,EAAApG,MAAAkH,EAAAnI,GAAAqH,EAAAP,MAAA,EAAAO,EAAA,OAAAA,EAAApG,WAAA+F,EAAAK,EAAAP,MAAA,EAAAO,GAAA,OAAAA,UAAA,OAAAA,KAAAf,GAAA,SAAAA,IAAA,OAAArF,WAAA+F,EAAAF,MAAA,UAAAlC,EAAAhD,UAAAiD,EAAAlE,EAAAwE,EAAA,eAAAlE,MAAA4D,EAAApB,cAAA,IAAA9C,EAAAkE,EAAA,eAAA5D,MAAA2D,EAAAnB,cAAA,IAAAmB,EAAA2D,YAAA7I,EAAAmF,EAAArB,EAAA,qBAAAhE,EAAAgJ,oBAAA,SAAAC,GAAA,IAAAC,EAAA,mBAAAD,KAAA1F,YAAA,QAAA2F,QAAA9D,GAAA,uBAAA8D,EAAAH,aAAAG,EAAAnI,QAAAf,EAAAmJ,KAAA,SAAAF,GAAA,OAAA/H,OAAAkI,eAAAlI,OAAAkI,eAAAH,EAAA5D,IAAA4D,EAAAI,UAAAhE,EAAAnF,EAAA+I,EAAAjF,EAAA,sBAAAiF,EAAA7G,UAAAlB,OAAAY,OAAA6D,GAAAsD,GAAAjJ,EAAAsJ,MAAA,SAAArE,GAAA,OAAAwB,QAAAxB,IAAAW,EAAAI,EAAA5D,WAAAlC,EAAA8F,EAAA5D,UAAA0B,GAAA,0BAAA9D,EAAAgG,gBAAAhG,EAAAuJ,MAAA,SAAAlF,EAAAC,EAAAC,EAAAC,EAAAyB,QAAA,IAAAA,MAAAuD,SAAA,IAAAC,EAAA,IAAAzD,EAAA5B,EAAAC,EAAAC,EAAAC,EAAAC,GAAAyB,GAAA,OAAAjG,EAAAgJ,oBAAA1E,GAAAmF,IAAA5B,OAAAnB,MAAA,SAAAF,GAAA,OAAAA,EAAAc,KAAAd,EAAA/E,MAAAgI,EAAA5B,WAAAjC,EAAAD,GAAAzF,EAAAyF,EAAA3B,EAAA,aAAA9D,EAAAyF,EAAA9B,GAAA,0BAAA3D,EAAAyF,EAAA,qDAAA3F,EAAA0J,KAAA,SAAAC,GAAA,IAAAzH,EAAAhB,OAAAyI,GAAAD,EAAA,WAAA3H,KAAAG,EAAAwH,EAAAnB,KAAAxG,GAAA,OAAA2H,EAAAE,UAAA,SAAA/B,IAAA,KAAA6B,EAAAZ,QAAA,KAAA/G,EAAA2H,EAAAG,MAAA,GAAA9H,KAAAG,EAAA,OAAA2F,EAAApG,MAAAM,EAAA8F,EAAAP,MAAA,EAAAO,EAAA,OAAAA,EAAAP,MAAA,EAAAO,IAAA7H,EAAA0F,SAAAb,EAAAzC,UAAA,CAAAmB,YAAAsB,EAAA6D,MAAA,SAAAoB,GAAA,QAAAC,KAAA,OAAAlC,KAAA,OAAAX,KAAA,KAAAC,WAAAK,EAAA,KAAAF,MAAA,OAAAP,SAAA,UAAAjB,OAAA,YAAAb,SAAAuC,EAAA,KAAAc,WAAAzC,QAAA2C,IAAAsB,EAAA,QAAA/I,KAAA,WAAAA,EAAAiJ,OAAA,IAAAtG,EAAA/C,KAAA,KAAAI,KAAA8H,OAAA9H,EAAAkJ,MAAA,WAAAlJ,QAAAyG,IAAA0C,KAAA,gBAAA5C,MAAA,MAAA6C,EAAA,KAAA7B,WAAA,GAAAG,WAAA,aAAA0B,EAAAjF,KAAA,MAAAiF,EAAAlF,IAAA,YAAAmF,MAAAhD,kBAAA,SAAAiD,GAAA,QAAA/C,KAAA,MAAA+C,EAAA,IAAAzF,EAAA,cAAA0F,EAAAC,EAAAC,GAAA,OAAAjE,EAAArB,KAAA,QAAAqB,EAAAtB,IAAAoF,EAAAzF,EAAAiD,KAAA0C,EAAAC,IAAA5F,EAAAkB,OAAA,OAAAlB,EAAAK,SAAAuC,KAAAgD,EAAA,QAAAhK,EAAA,KAAA8H,WAAAQ,OAAA,EAAAtI,GAAA,IAAAA,EAAA,KAAAyH,EAAA,KAAAK,WAAA9H,GAAA+F,EAAA0B,EAAAQ,WAAA,YAAAR,EAAAC,OAAA,OAAAoC,EAAA,UAAArC,EAAAC,QAAA,KAAA6B,KAAA,KAAAU,EAAA/G,EAAA/C,KAAAsH,EAAA,YAAAyC,EAAAhH,EAAA/C,KAAAsH,EAAA,iBAAAwC,GAAAC,EAAA,SAAAX,KAAA9B,EAAAE,SAAA,OAAAmC,EAAArC,EAAAE,UAAA,WAAA4B,KAAA9B,EAAAG,WAAA,OAAAkC,EAAArC,EAAAG,iBAAA,GAAAqC,GAAA,QAAAV,KAAA9B,EAAAE,SAAA,OAAAmC,EAAArC,EAAAE,UAAA,YAAAuC,EAAA,UAAAxH,MAAA,kDAAA6G,KAAA9B,EAAAG,WAAA,OAAAkC,EAAArC,EAAAG,gBAAAf,OAAA,SAAAnC,EAAAD,GAAA,QAAAzE,EAAA,KAAA8H,WAAAQ,OAAA,EAAAtI,GAAA,IAAAA,EAAA,KAAAyH,EAAA,KAAAK,WAAA9H,GAAA,GAAAyH,EAAAC,QAAA,KAAA6B,MAAArG,EAAA/C,KAAAsH,EAAA,oBAAA8B,KAAA9B,EAAAG,WAAA,KAAAuC,EAAA1C,EAAA,OAAA0C,IAAA,UAAAzF,GAAA,aAAAA,IAAAyF,EAAAzC,QAAAjD,MAAA0F,EAAAvC,aAAAuC,EAAA,UAAApE,EAAAoE,IAAAlC,WAAA,UAAAlC,EAAArB,OAAAqB,EAAAtB,MAAA0F,GAAA,KAAA7E,OAAA,YAAA+B,KAAA8C,EAAAvC,WAAAjD,GAAA,KAAAyF,SAAArE,IAAAqE,SAAA,SAAArE,EAAA8B,GAAA,aAAA9B,EAAArB,KAAA,MAAAqB,EAAAtB,IAAA,gBAAAsB,EAAArB,MAAA,aAAAqB,EAAArB,KAAA,KAAA2C,KAAAtB,EAAAtB,IAAA,WAAAsB,EAAArB,MAAA,KAAAkF,KAAA,KAAAnF,IAAAsB,EAAAtB,IAAA,KAAAa,OAAA,cAAA+B,KAAA,kBAAAtB,EAAArB,MAAAmD,IAAA,KAAAR,KAAAQ,GAAAlD,GAAA0F,OAAA,SAAAzC,GAAA,QAAA5H,EAAA,KAAA8H,WAAAQ,OAAA,EAAAtI,GAAA,IAAAA,EAAA,KAAAyH,EAAA,KAAAK,WAAA9H,GAAA,GAAAyH,EAAAG,eAAA,YAAAwC,SAAA3C,EAAAQ,WAAAR,EAAAI,UAAAG,EAAAP,GAAA9C,IAAA2F,MAAA,SAAA5C,GAAA,QAAA1H,EAAA,KAAA8H,WAAAQ,OAAA,EAAAtI,GAAA,IAAAA,EAAA,KAAAyH,EAAA,KAAAK,WAAA9H,GAAA,GAAAyH,EAAAC,WAAA,KAAA3B,EAAA0B,EAAAQ,WAAA,aAAAlC,EAAArB,KAAA,KAAA6F,EAAAxE,EAAAtB,IAAAuD,EAAAP,GAAA,OAAA8C,GAAA,UAAA7H,MAAA,0BAAA8H,cAAA,SAAArC,EAAAf,EAAAE,GAAA,YAAAf,SAAA,CAAAzD,SAAAoC,EAAAiD,GAAAf,aAAAE,WAAA,cAAAhC,SAAA,KAAAb,SAAAuC,GAAArC,IAAAnF,EAAA,SAAAiL,EAAAC,EAAA9E,EAAAC,EAAA8E,EAAAC,EAAArJ,EAAAkD,GAAA,QAAA0C,EAAAuD,EAAAnJ,GAAAkD,GAAAxD,EAAAkG,EAAAlG,MAAA,MAAAmF,GAAA,YAAAP,EAAAO,GAAAe,EAAAL,KAAAlB,EAAA3E,GAAA+H,QAAApD,QAAA3E,GAAAiF,KAAAyE,EAAAC,GAAA,SAAAC,EAAArG,GAAA,sBAAAT,EAAA,KAAA+G,EAAAC,UAAA,WAAA/B,SAAA,SAAApD,EAAAC,GAAA,IAAA6E,EAAAlG,EAAAwG,MAAAjH,EAAA+G,GAAA,SAAAH,EAAA1J,GAAAwJ,EAAAC,EAAA9E,EAAAC,EAAA8E,EAAAC,EAAA,OAAA3J,GAAA,SAAA2J,EAAAjH,GAAA8G,EAAAC,EAAA9E,EAAAC,EAAA8E,EAAAC,EAAA,QAAAjH,GAAAgH,OAAA3D,OAAA,SAAAzE,EAAA0I,EAAAC,GAAA,KAAAD,aAAAC,GAAA,UAAAhE,UAAA,8CAAAiE,EAAAC,EAAAC,GAAA,QAAArL,EAAA,EAAAA,EAAAqL,EAAA/C,OAAAtI,IAAA,KAAAsL,EAAAD,EAAArL,GAAAsL,EAAA1K,WAAA0K,EAAA1K,aAAA,EAAA0K,EAAA7H,cAAA,YAAA6H,MAAA5H,UAAA,GAAAhD,OAAAC,eAAAyK,GAAA3G,EAAA6G,EAAA/J,eAAA,SAAAgK,EAAAC,GAAA,cAAA5I,EAAA2I,IAAA,OAAAA,EAAA,OAAAA,EAAA,IAAAE,EAAAF,EAAAxK,OAAA2K,aAAA,QAAA1E,IAAAyE,EAAA,KAAAE,EAAAF,EAAAtL,KAAAoL,EAAAC,GAAA,yBAAA5I,EAAA+I,GAAA,OAAAA,EAAA,UAAAzE,UAAA,kEAAAsE,EAAAI,OAAAC,QAAAN,GAAAO,CAAArH,EAAA,qBAAA7B,EAAArB,KAAAqK,OAAArK,IAAA+J,GAAA,IAAA7G,EAAAlD,EAaA,IAAMwK,EAAiB,CACrBC,QAAS,IACTC,QAAS,GACTC,kBAAkB,EAClBC,WAAW,EACXC,iBAAiB,EACjB9G,OAAQ,MACR+G,aAAc,SAAA9L,GAAI,OAAIA,GACtB+L,YAAa,oCACbC,KAAM,KACNC,uBAAuB,EACvBC,0BAA0B,GAGtBC,EAAgB,WAOpB,SAAAA,IAAgC,IAAnBC,EAAY5B,UAAAzC,OAAA,QAAAtB,IAAA+D,UAAA,GAAAA,UAAA,GAAG,GAO1B,OAP4BxI,EAAA,KAAAmK,GAC5B9M,KAAKgN,OAASlM,OAAOmM,OAAO,GAAId,EAAgBY,GAChD/M,KAAKkN,KAAOlN,KAAKmN,aACjBnN,KAAKyC,QAAU,KACfzC,KAAKoN,eAAiB,KACtBpN,KAAKqN,qBAAkBjG,EAEnBpH,KAAKgN,OAAOT,UAAkBvM,KAAKsN,eAEhCtN,KA3CX,IAAAsL,EAAAiC,EAAAC,EAmRGC,EAhBAC,EAuCA,OA1SHpC,EA4CGwB,GA5CHS,EA4CG,EAAA5L,IAAA,QAAAN,MAED,WACE,OAAOrB,KAAKsN,iBACb,CAAA3L,IAAA,QAAAN,MAED,SAAOsM,GACA3N,KAAKqN,iBACVrN,KAAKqN,gBAAgBO,MAAMD,GAAU,wBACtC,CAAAhM,IAAA,eAAAN,MAED,WAAgB,IAAAqB,EAAA,KACd,OAAO,IAAI0G,SAAQ,SAACpD,EAASC,GAC3BvD,EAAKmL,aAAa7H,EAASC,QAE9B,CAAAtE,IAAA,kBAAAN,MAED,SAAiByM,GACV9N,KAAKqN,iBACVrN,KAAKqN,gBAAgBU,OAAOC,iBAAiB,QAASF,KACvD,CAAAnM,IAAA,oBAAAN,MAED,SAAmByM,GACZ9N,KAAKqN,iBACVrN,KAAKqN,gBAAgBU,OAAOE,oBAAoB,QAASH,KAC1D,CAAAnM,IAAA,eAAAN,MAED,SAAc2E,EAASC,GAAQ,IAAAiI,EAAA,KAEvBC,EAAW,WACfD,EAAKhB,KAAK1B,OAAS,SACnB0C,EAAKhB,KAAKkB,KAAOF,EAAKlB,OAAOqB,IAC7BH,EAAKI,aAIP,KAAM,aAActO,KAAKkN,OAASlN,KAAKuO,WAErC,OADAJ,IACOnI,IAGThG,KAAKyC,QAAUzC,KAAKwO,gBAEpBxO,KAAKqN,gBAAkB,oBAAqBoB,OAAS,IAAIC,gBAAoB,KAE7E,IAAMZ,EAAgB,SAAhBA,EAAaa,GAAiB,IAAZnD,EAAMmD,EAANnD,OACtB0C,EAAKU,kBAAkBd,GACrBI,EAAKzL,SAAWyL,EAAKzL,QAAQmL,QAC/B3H,EAAOuF,EAAOmC,SAKhB,OAFA3N,KAAK6O,gBAAgBf,GAEhB9N,KAAKgN,OAAOqB,KAIjBrO,KAAKyC,QAAQqM,OAAM7D,EAAA7H,IAAA2F,MAAG,SAAAgG,IAAA,OAAA3L,IAAAY,MAAA,SAAAgL,GAAA,cAAAA,EAAArF,KAAAqF,EAAAvH,MAAA,OACkB,GAAtCyG,EAAKU,kBAAkBd,GACmB,MAAtCmB,SAASf,EAAKzL,QAAQyM,OAAQ,IAAW,CAAAF,EAAAvH,KAAA,eAAAuH,EAAA/H,OAAA,SACpChB,EAAO,IAAI7D,EAAkB,gBAADQ,OAAiBsL,EAAKzL,QAAQyM,OAAM,KAAKhB,EAAKzL,WAAS,cAAAuM,EAAAvH,KAAA,EAEtFyG,EAAKiB,gBAAe,cAAAH,EAAA/H,OAAA,SACnBjB,EAAQkI,IAAK,wBAAAc,EAAAlF,UAAAiF,OAGtB/O,KAAKyC,QAAQ2M,UAAY,WACvBlB,EAAKU,kBAAkBd,GACvB7H,EAAO,IAAI7D,EAAkB,kBAAmB8L,EAAKzL,WAGvDzC,KAAKyC,QAAQ4M,QAAU,WACrBnB,EAAKU,kBAAkBd,GACnBI,EAAKlB,OAAOJ,uBACduB,IACAnI,EAAQkI,IAERjI,EAAO,IAAI7D,EAAkB,gBAAiB8L,EAAKzL,WAIvDzC,KAAKyC,QAAQ6M,KAAKtP,KAAKgN,OAAOL,MAEvB3M,MA7BEiG,EAAO,IAAI7D,EAAkB,yBAA0BpC,KAAKyC,YA8BtE,CAAAd,IAAA,WAAAN,MAED,WACE,OAAQrB,KAAKgN,OAAOV,kBAClB,iEAAiEiD,KAAKC,UAAUC,aACnF,CAAA9N,IAAA,gBAAAN,MAED,WACE,IAAIoB,EAAU,IAAIiN,eAkBlB,OAhBAjN,EAAQkN,KAAK3P,KAAKgN,OAAOtH,OAAQ1F,KAAKgN,OAAOqB,KAAK,IAClB,IAA5BrO,KAAKgN,OAAON,aACdjK,EAAQmN,iBAAiB,eAAgB5P,KAAKgN,OAAON,aAEvD1M,KAAKgN,OAAOX,QAAQ5G,SAAQ,SAAAoK,GAC1BpN,EAAQmN,iBAAiBC,EAAOlP,KAAMkP,EAAOxO,UAE/CoB,EAAQqN,aAAe,cACnB9P,KAAKgN,OAAO+C,SAA0C,mBAAxB/P,KAAKgN,OAAO+C,SAC5CtN,EAAQuL,iBAAiB,WAAYhO,KAAKgN,OAAO+C,SAE/C/P,KAAKgN,OAAOgD,aAAkD,mBAA5BhQ,KAAKgN,OAAOgD,cAChDvN,EAAQuN,YAAchQ,KAAKgN,OAAOgD,aAEpCvN,EAAQ2J,QAAUpM,KAAKgN,OAAOZ,QAC9B3J,EAAQ+J,kBAAoBxM,KAAKgN,OAAOR,mBAAqBxM,KAAKgN,OAAOiD,mBAClExN,IACR,CAAAd,IAAA,cAAAN,MAED,WAEE,GAAoC,iBAAzBrB,KAAKgN,OAAOkD,SACrB,OAAOlQ,KAAKgN,OAAOkD,SAGrB,IAAIC,EAAUnQ,KAAKyC,QAAQ2N,kBAAkB,uBACzCC,EAAe,GAEfF,IACFE,EAAeF,EAAQG,QAAQ,QAAS,IAAIC,MAAM,wBAGpD,IAAMC,EAAgBH,GAAgBA,EAAa3H,QAAU,EAC3D2H,EAAa,GACbrQ,KAAKgN,OAAOqB,IAAIoC,MAAM,KAAKhH,MAAMgH,MAAM,KAAK,GAE9C,OAAOzQ,KAAKgN,OAAOP,aAAa+D,KACjC,CAAA7O,IAAA,kCAAAN,MAED,SAAiCqP,GAC/B,IAAMC,EAAa7P,OAAOmM,OAAO,GAAIlK,EAAgB/C,KAAKgN,OAAO4D,sBAEjE,OAAO,IAAIxH,SAAQ,SAACpD,EAASC,GAC3B,IAAM4K,EAAS,IAAIC,WACbC,EAAoBL,EAAK7G,MAAM,EAAG,GAExCgH,EAAOG,UAAY,SAACC,GAClB,GAAIA,EAAIzF,OAAO0F,aAAeJ,WAAWK,KAAzC,CAMA,IAAMC,EAAO,IAAIC,WAAWJ,EAAIzF,OAAOpF,QACjCkL,EAAQ,GAEdF,EAAK3L,SAAQ,SAAC8L,GAEZD,EAAMnJ,KAAKoJ,EAAKC,SAAS,QAG3B,IAAMC,EAAMH,EAAMI,KAAK,IAAIC,cAC3B3L,EAAQ2K,EAAWc,SAdjBxL,KAiBJ4K,EAAOxB,QAAUpJ,EAGjB4K,EAAOe,kBAAkBb,QAE5B,CAAApP,IAAA,mCAAAN,MAED,WACE,OAAOrB,KAAKyC,QAAQ2N,kBAAkB,kBACvC,CAAAzO,IAAA,iBAAAN,MAED,SAAgBwQ,GAAU,IAAAC,EAAA,KACxB,OAAO,IAAI1I,QAAO,eAAA2I,EAAA9G,EAAA7H,IAAA2F,MAAC,SAAAiJ,EAAOhM,GAAO,IAAA6G,EAAAoF,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAnP,IAAAY,MAAA,SAAAwO,GAAA,cAAAA,EAAA7I,KAAA6I,EAAA/K,MAAA,OAQ9B,GAPOoF,EAA6BiF,EAAK9E,OAAlCH,yBACFoF,EAAqB,2BAIM,WAA7BpF,GAAsE,SAA7BA,IAC3CqF,EAAoBJ,EAAKW,oCAGM,cAA7B5F,GAAyE,SAA7BA,EAAmC,CAAA2F,EAAA/K,KAAA,eAAA+K,EAAA/K,KAAA,EACpDqK,EAAKY,gCAAgC,IAAIC,KAAK,CAACd,KAAW,OAAvFM,EAAoBK,EAAA1L,KAAA,OAIpBd,EAD+B,WAA7B6G,EACuB,QAAlBuF,EAACF,SAAiB,IAAAE,IAAIH,EACS,cAA7BpF,EACmB,QAArBwF,EAACF,SAAoB,IAAAE,IAAIJ,EACM,SAA7BpF,GACwC,QAA1CyF,EAAqB,QAArBC,EAACJ,SAAoB,IAAAI,IAAIL,SAAiB,IAAAI,IAEzCL,GACT,wBAAAO,EAAA1I,UAAAkI,OACF,gBAAAY,GAAA,OAAAb,EAAA3G,MAAA,KAAAD,YAvBiB,MAwBnB,CAAAxJ,IAAA,aAAAN,MAED,WACE,IAAI6L,EAAO2F,SAASC,cAAc,KAGlC,OADA5F,EAAK6F,MAAMC,QAAU,OACd9F,IACR,CAAAvL,IAAA,YAAAN,MAED,WACE,IAAI4R,EAEJ,IACEA,EAAQ,IAAIC,WAAW,SACvB,MAAOC,IACPF,EAAQJ,SAASO,YAAY,eACvBC,eAAe,SAAS,GAAM,EAAM5E,OAAQ,EAAG,EAAG,EAAG,EAAG,GAAG,GAAO,GAAO,GAAO,EAAO,EAAG,MAGlGzO,KAAKkN,KAAKoG,cAAcL,KACzB,CAAAtR,IAAA,UAAAN,OAAAqM,EAAAzC,EAAA7H,IAAA2F,MAED,SAAAwK,EAAe1B,EAAU2B,GAAQ,IAAA1O,EAAA4L,EAAA+C,EAAA,OAAArQ,IAAAY,MAAA,SAAA0P,GAAA,cAAAA,EAAA/J,KAAA+J,EAAAjM,MAAA,cAAAiM,EAAAjM,KAAA,EACZzH,KAAK2T,eAAe9B,GAAS,OAA1C/M,EAAI4O,EAAA5M,KAEN2M,EAAU,CAAE3O,QAEhB,IACE4L,EAAO,IAAIkD,KAAK,CAAC/B,GAAW2B,EAAUC,GACtC,MAAON,IACPzC,EAAO,IAAIiC,KAAK,CAACd,GAAW4B,IACvB9S,KAAO6S,EACZ9C,EAAKmD,iBAAmB,IAAIC,KAC7B,OAAAJ,EAAAzM,OAAA,SAEMyJ,GAAI,wBAAAgD,EAAA5J,UAAAyJ,EAAA,UACZ,SAAAQ,EAAAC,GAAA,OAAAtG,EAAAtC,MAAA,KAAAD,cAAA,CAAAxJ,IAAA,gBAAAN,OAAAoM,EAAAxC,EAAA7H,IAAA2F,MAED,SAAAkL,IAAA,IAAAT,EAAAU,EAAA,OAAA9Q,IAAAY,MAAA,SAAAmQ,GAAA,cAAAA,EAAAxK,KAAAwK,EAAA1M,MAAA,OACqC,OAA7B+L,EAAWxT,KAAKoU,cAAaD,EAAA1M,KAAA,EAEPzH,KAAKqU,QAAQrU,KAAKyC,QAAQoP,SAAU2B,GAAS,OAAtD,GAAnBxT,KAAKoN,eAAc+G,EAAArN,OAGf,qBAAsB2H,OAAOe,WAAS,CAAA2E,EAAA1M,KAAA,eAAA0M,EAAAlN,OAAA,SACjCwH,OAAOe,UAAU8E,iBAAiBtU,KAAKoN,eAAgBoG,IAAS,OAW3D,OARVU,EAAYzF,OAAO8F,IAAIC,gBAAgBxU,KAAKoN,gBAEhDpN,KAAKkN,KAAKkB,KAAO8F,EACjBlU,KAAKkN,KAAKuH,SAAWjB,EACrBxT,KAAKsO,YAELoG,YAAW,YACRjG,OAAO8F,KAAO9F,OAAOkG,WAAalG,QAAQmG,gBAAgBV,KAC1D,KAAWC,EAAAlN,OAAA,SAEPjH,KAAKoN,gBAAc,yBAAA+G,EAAArK,UAAAmK,EAAA,UAC3B,kBAAAxG,EAAArC,MAAA,KAAAD,iBA1SHI,EAAAD,EAAAtJ,UAAAuL,GAAAC,GAAAjC,EAAAD,EAAAkC,GAAA1M,OAAAC,eAAAuK,EAAA,aAAAxH,UAAA,IA0SGgJ,EA/QmB,GAmRPA,e","file":"js-file-downloader.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"jsFileDownloader\"] = factory();\n\telse\n\t\troot[\"jsFileDownloader\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","export class DownloadException extends Error {\n  constructor (message, request) {\n    super(`Downloader error: ${message}`);\n    this.request = request;\n    this.name = 'DownloadException';\n  }\n};\n\n/**\n * @deprecated use DownloadException instead, it will be removed in next releases!\n */\nexport const downloadException = DownloadException;\n","export const fileSignatures = {\n  '89504E47': 'image/png',\n  '25504446': 'application/pdf'\n};\n","/*!\n * JS File Downloader v ##package_version##\n * https://github.com/AleeeKoi/js-file-downloader\n *\n * Copyright Alessandro Pellizzari\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n */\n\n'use strict';\n\nimport { DownloadException } from './exception';\nimport {fileSignatures} from './signatures';\n\nconst DEFAULT_PARAMS = {\n  timeout: 40000,\n  headers: [],\n  forceDesktopMode: false,\n  autoStart: true,\n  withCredentials: false,\n  method: 'GET',\n  nameCallback: name => name,\n  contentType: 'application/x-www-form-urlencoded',\n  body: null,\n  nativeFallbackOnError: false,\n  contentTypeDetermination: false\n};\n\nclass JsFileDownloader {\n\n  /**\n   * Create a new JsFileDownloader instance\n   * You need to define a {String} \"url\" params and other\n   * @param {Object} customParams\n   */\n  constructor (customParams = {}) {\n    this.params = Object.assign({}, DEFAULT_PARAMS, customParams);\n    this.link = this.createLink();\n    this.request = null;\n    this.downloadedFile = null;\n    this.abortController = undefined;\n\n    if (this.params.autoStart) return this.downloadFile();\n\n    return this;\n  }\n\n  start () {\n    return this.downloadFile();\n  }\n\n  abort (reason) {\n    if (!this.abortController) { return; }\n    this.abortController.abort(reason || 'Download cancelled');\n  }\n\n  downloadFile () {\n    return new Promise((resolve, reject) => {\n      this.initDownload(resolve, reject);\n    });\n  }\n\n  setAbortListner (abortListener) {\n    if (!this.abortController) { return; }\n    this.abortController.signal.addEventListener('abort', abortListener);\n  }\n\n  unsetAbortListner (abortListener) {\n    if (!this.abortController) { return; }\n    this.abortController.signal.removeEventListener('abort', abortListener);\n  }\n\n  initDownload (resolve, reject) {\n\n    const fallback = () => {\n      this.link.target = '_blank';\n      this.link.href = this.params.url;\n      this.clickLink();\n    };\n\n    // fallback for old browsers\n    if (!('download' in this.link) || this.isMobile()) {\n      fallback();\n      return resolve();\n    }\n\n    this.request = this.createRequest();\n\n    this.abortController = 'AbortController' in window ? new AbortController() : null;\n\n    const abortListener = ({target}) => {\n      this.unsetAbortListner(abortListener);\n      !!this.request && this.request.abort();\n      reject(target.reason);\n    };\n\n    this.setAbortListner(abortListener);\n\n    if (!this.params.url) {\n      return reject(new DownloadException('url param not defined!', this.request));\n    }\n\n    this.request.onload = async () => {\n      this.unsetAbortListner(abortListener);\n      if (parseInt(this.request.status, 10) !== 200) {\n        return reject(new DownloadException(`status code [${this.request.status}]`, this.request));\n      }\n      await this.startDownload();\n      return resolve(this);\n    };\n\n    this.request.ontimeout = () => {\n      this.unsetAbortListner(abortListener);\n      reject(new DownloadException('request timeout', this.request));\n    };\n\n    this.request.onerror = () => {\n      this.unsetAbortListner(abortListener);\n      if (this.params.nativeFallbackOnError) {\n        fallback();\n        resolve(this);\n      } else {\n        reject(new DownloadException('network error', this.request));\n      }\n    };\n\n    this.request.send(this.params.body);\n\n    return this;\n  }\n\n  isMobile () {\n    return !this.params.forceDesktopMode &&\n      /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n  }\n\n  createRequest () {\n    let request = new XMLHttpRequest();\n\n    request.open(this.params.method, this.params.url, true);\n    if (this.params.contentType !== false) {\n      request.setRequestHeader('Content-type', this.params.contentType);\n    }\n    this.params.headers.forEach(header => {\n      request.setRequestHeader(header.name, header.value);\n    });\n    request.responseType = 'arraybuffer';\n    if (this.params.process && typeof this.params.process === 'function') {\n      request.addEventListener('progress', this.params.process);\n    }\n    if (this.params.onloadstart && typeof this.params.onloadstart === 'function') {\n      request.onloadstart = this.params.onloadstart;\n    }\n    request.timeout = this.params.timeout;\n    request.withCredentials = !!this.params.withCredentials || !!this.params.includeCredentials;\n    return request;\n  }\n\n  getFileName () {\n    // Forcing file name\n    if (typeof this.params.filename === 'string') {\n      return this.params.filename;\n    }\n    // Trying to get file name from response header\n    let content = this.request.getResponseHeader('Content-Disposition');\n    let contentParts = [];\n\n    if (content) {\n      contentParts = content.replace(/[\"']/g, '').match(/filename\\*?=([^;]+)/);\n    }\n\n    const extractedName = contentParts && contentParts.length >= 1 ?\n      contentParts[1] :\n      this.params.url.split('/').pop().split('?')[0];\n\n    return this.params.nameCallback(extractedName);\n  }\n\n  getContentTypeFromFileSignature (file) {\n    const signatures = Object.assign({}, fileSignatures, this.params.customFileSignatures);\n\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      const first4BytesOfFile = file.slice(0, 4);\n\n      reader.onloadend = (evt) => {\n        if (evt.target.readyState !== FileReader.DONE) {\n          reject();\n          return;\n        }\n        // Since an array buffer is just a generic way to represent a binary buffer\n        // we need to create a TypedArray, in this case an Uint8Array\n        const uint = new Uint8Array(evt.target.result);\n        const bytes = [];\n\n        uint.forEach((byte) => {\n          // transform every byte to hexadecimal\n          bytes.push(byte.toString(16));\n        });\n\n        const hex = bytes.join('').toUpperCase();\n        resolve(signatures[hex]);\n      };\n\n      reader.onerror = reject;\n\n      // read first 4 bytes of sliced file as an array buffer\n      reader.readAsArrayBuffer(first4BytesOfFile);\n    });\n  }\n\n  getContentTypeFromResponseHeader () {\n    return this.request.getResponseHeader('content-type');\n  }\n\n  getContentType (response) {\n    return new Promise(async (resolve) => {\n      const { contentTypeDetermination } = this.params;\n      const defaultContentType = 'application/octet-stream';\n      let headerContentType;\n      let signatureContentType;\n\n      if (contentTypeDetermination === 'header' || contentTypeDetermination === 'full') {\n        headerContentType = this.getContentTypeFromResponseHeader();\n      }\n\n      if (contentTypeDetermination === 'signature' || contentTypeDetermination === 'full') {\n        signatureContentType = await this.getContentTypeFromFileSignature(new Blob([response]));\n      }\n\n      if (contentTypeDetermination === 'header') {\n        resolve(headerContentType ?? defaultContentType);\n      } else if (contentTypeDetermination === 'signature') {\n        resolve(signatureContentType ?? defaultContentType);\n      } else if (contentTypeDetermination === 'full') {\n        resolve(signatureContentType ?? headerContentType ?? defaultContentType);\n      } else {\n        resolve(defaultContentType);\n      }\n    });\n  }\n\n  createLink () {\n    let link = document.createElement('a');\n\n    link.style.display = 'none';\n    return link;\n  }\n\n  clickLink () {\n    let event;\n\n    try {\n      event = new MouseEvent('click');\n    } catch (e) {\n      event = document.createEvent('MouseEvent');\n      event.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n    }\n\n    this.link.dispatchEvent(event);\n  }\n\n  async getFile (response, fileName) {\n    const type = await this.getContentType(response);\n    let file;\n    let options = { type };\n\n    try {\n      file = new File([response], fileName, options);\n    } catch (e) {\n      file = new Blob([response], options);\n      file.name = fileName;\n      file.lastModifiedDate = new Date();\n    }\n\n    return file;\n  }\n\n  async startDownload () {\n    const fileName = this.getFileName();\n\n    this.downloadedFile = await this.getFile(this.request.response, fileName);\n\n    // native IE\n    if ('msSaveOrOpenBlob' in window.navigator) {\n      return window.navigator.msSaveOrOpenBlob(this.downloadedFile, fileName);\n    }\n\n    let objectUrl = window.URL.createObjectURL(this.downloadedFile);\n\n    this.link.href = objectUrl;\n    this.link.download = fileName;\n    this.clickLink();\n\n    setTimeout(() => {\n      (window.URL || window.webkitURL || window).revokeObjectURL(objectUrl);\n    }, 1000 * 40);\n\n    return this.downloadedFile;\n  }\n\n}\n\nexport default JsFileDownloader;\n"],"sourceRoot":""}